<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="verinice-sync" resourceRoot="" soapui-version="4.5.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="sync-serviceSOAP" type="wsdl" bindingName="{http://www.sernet.de/sync/sync-service}sync-serviceSOAP" soapVersion="1_1" anonymous="optional" definition="file:/home/dm/eclipse-workspaces/eclipse-3.7_verinice-TRUNK/sernet.gs.service/src/sernet/verinice/service/sync/sync-service.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="file:/home/dm/eclipse-workspaces/eclipse-3.7_verinice-TRUNK/sernet.gs.service/src/sernet/verinice/service/sync/sync-service.wsdl"><con:part><con:url>file:/home/dm/eclipse-workspaces/eclipse-3.7_verinice-TRUNK/sernet.gs.service/src/sernet/verinice/service/sync/sync-service.wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="sync-service" targetNamespace="http://www.sernet.de/sync/sync-service" xmlns:ss="http://www.sernet.de/sync/sync-service" xmlns:sync="http://www.sernet.de/sync/sync" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <wsdl:types>
    <xsd:schema targetNamespace="http://www.sernet.de/sync/sync-service">
      <xsd:import namespace="http://www.sernet.de/sync/sync" schemaLocation="sync.xsd"/>
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="syncRequest">
    <wsdl:part name="request" element="sync:syncRequest"/>
  </wsdl:message>
  <wsdl:message name="syncResponse">
    <wsdl:part name="response" element="sync:syncResponse"/>
  </wsdl:message>
  <wsdl:portType name="sync-service">
    <wsdl:operation name="sync">
      <wsdl:input message="ss:syncRequest"/>
      <wsdl:output message="ss:syncResponse"/>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="sync-serviceSOAP" type="ss:sync-service">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="sync">
      <soap:operation soapAction="http://www.sernet.de/sync/sync"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="sync-service">
    <wsdl:port name="sync-service" binding="ss:sync-serviceSOAP">
      <soap:address location="http://localhost:8080/sync-service"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>file:/home/dm/eclipse-workspaces/eclipse-3.7_verinice-TRUNK/sernet.gs.service/src/sernet/verinice/service/sync/sync.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="http://www.sernet.de/sync/sync" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:data="http://www.sernet.de/sync/data" xmlns:map="http://www.sernet.de/sync/mapping">
  <xsd:import namespace="http://www.sernet.de/sync/data" schemaLocation="data.xsd"/>
  <xsd:import namespace="http://www.sernet.de/sync/mapping" schemaLocation="mapping.xsd"/>
  <xsd:element name="syncRequest">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element ref="data:syncData" minOccurs="1" maxOccurs="1"/>
        <xsd:element ref="map:syncMapping" minOccurs="1" maxOccurs="1"/>
      </xsd:sequence>
      <xsd:attribute name="sourceId" type="xsd:string" use="required"/>
      <!--insert new object, if object with (sourceId, extId) does not yet exist?-->
      <xsd:attribute name="insert" type="xsd:boolean" default="true"/>
      <!--update object, if object with (sourceId, extId) already exists?-->
      <xsd:attribute name="update" type="xsd:boolean" default="true"/>
      <!--delete objects missing in syncData, which have been imported previously from sourceId?-->
      <xsd:attribute name="delete" type="xsd:boolean" default="false"/>
    </xsd:complexType>
  </xsd:element>
  <xsd:element name="syncResponse">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="replyMessage" type="xsd:string" minOccurs="1" maxOccurs="unbounded"/>
        <xsd:element name="inserted" type="xsd:int" minOccurs="1" maxOccurs="1"/>
        <xsd:element name="updated" type="xsd:int" minOccurs="1" maxOccurs="1"/>
        <xsd:element name="deleted" type="xsd:int" minOccurs="1" maxOccurs="1"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:/home/dm/eclipse-workspaces/eclipse-3.7_verinice-TRUNK/sernet.gs.service/src/sernet/verinice/service/sync/data.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="http://www.sernet.de/sync/data" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:data="http://www.sernet.de/sync/data">
  <xsd:element name="syncData">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="syncObject" type="data:syncObject" maxOccurs="unbounded"/>
        <xsd:element name="syncLink" type="data:syncLink" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
  <xsd:complexType name="syncObject">
    <xsd:sequence>
      <xsd:element name="syncAttribute" maxOccurs="unbounded" type="data:syncAttribute"/>
      <xsd:element name="extId" type="xsd:string" minOccurs="1" nillable="false"/>
      <xsd:element name="extObjectType" type="xsd:string" minOccurs="1" nillable="false"/>
      <xsd:element name="children" minOccurs="0" maxOccurs="unbounded" type="data:syncObject"/>
      <xsd:element name="file" minOccurs="0" maxOccurs="unbounded" type="data:syncFile"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="syncFile">
    <xsd:sequence>
      <xsd:element name="syncAttribute" maxOccurs="unbounded" type="data:syncAttribute"/>
      <xsd:element name="extId" type="xsd:string" minOccurs="1" nillable="false"/>
      <xsd:element name="file" type="xsd:string" minOccurs="1" nillable="false"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="syncAttribute">
    <xsd:sequence>
      <xsd:element name="name" type="xsd:string" minOccurs="1" maxOccurs="1"/>
      <!--The verinice object system consistently treats property values as lists. This
            is hereby reflected. One valued properties simply use only one entry in the
            value list.-->
      <xsd:element name="value" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>
  <xsd:complexType name="syncLink">
    <xsd:sequence>
      <xsd:element name="dependant" type="xsd:string" minOccurs="1" maxOccurs="1" nillable="false"/>
      <xsd:element name="dependency" type="xsd:string" minOccurs="1" maxOccurs="1" nillable="false"/>
      <xsd:element name="relationId" type="xsd:string" minOccurs="1" maxOccurs="1" nillable="false"/>
      <xsd:element name="comment" type="xsd:string" minOccurs="0" maxOccurs="1" nillable="false"/>
    </xsd:sequence>
  </xsd:complexType>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:/home/dm/eclipse-workspaces/eclipse-3.7_verinice-TRUNK/sernet.gs.service/src/sernet/verinice/service/sync/mapping.xsd</con:url><con:content><![CDATA[<xsd:schema targetNamespace="http://www.sernet.de/sync/mapping" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="syncMapping">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="mapObjectType" minOccurs="0" maxOccurs="unbounded">
          <xsd:complexType>
            <xsd:sequence>
              <xsd:element name="mapAttributeType" minOccurs="0" maxOccurs="unbounded">
                <xsd:complexType>
                  <xsd:attribute name="extId" type="xsd:string"/>
                  <xsd:attribute name="intId" type="xsd:string"/>
                </xsd:complexType>
              </xsd:element>
            </xsd:sequence>
            <xsd:attribute name="extId" type="xsd:ID" use="required"/>
            <xsd:attribute name="intId" type="xsd:string" use="required"/>
          </xsd:complexType>
        </xsd:element>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://localhost:8080/vn-1.5.3-B0/sync/sync</con:endpoint><con:endpoint>http://pluto:8088/mocksync</con:endpoint></con:endpoints><con:operation isOneWay="false" action="http://www.sernet.de/sync/sync" name="sync" bindingOperationName="sync" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/vn-1.5.3-B0/sync/sync</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sync="http://www.sernet.de/sync/sync" xmlns:data="http://www.sernet.de/sync/data" xmlns:map="http://www.sernet.de/sync/mapping">
   <soapenv:Header/>
   <soapenv:Body>
      <sync:syncRequest sourceId="?" insert="true" update="true" delete="false">
         <data:syncData>
            <!--1 or more repetitions:-->
            <data:syncObject>
               <!--1 or more repetitions:-->
               <data:syncAttribute>
                  <data:name>?</data:name>
                  <!--Zero or more repetitions:-->
                  <data:value>?</data:value>
               </data:syncAttribute>
               <data:extId>?</data:extId>
               <data:extObjectType>?</data:extObjectType>
               <!--Zero or more repetitions:-->
               <data:children/>
               <!--Zero or more repetitions:-->
               <data:file>
                  <!--1 or more repetitions:-->
                  <data:syncAttribute>
                     <data:name>?</data:name>
                     <!--Zero or more repetitions:-->
                     <data:value>?</data:value>
                  </data:syncAttribute>
                  <data:extId>?</data:extId>
                  <data:file>?</data:file>
               </data:file>
            </data:syncObject>
            <!--Zero or more repetitions:-->
            <data:syncLink>
               <data:dependant>?</data:dependant>
               <data:dependency>?</data:dependency>
               <data:relationId>?</data:relationId>
               <!--Optional:-->
               <data:comment>?</data:comment>
            </data:syncLink>
         </data:syncData>
         <map:syncMapping>
            <!--Zero or more repetitions:-->
            <map:mapObjectType extId="?" intId="?">
               <!--Zero or more repetitions:-->
               <map:mapAttributeType extId="?" intId="?"/>
            </map:mapObjectType>
         </map:syncMapping>
      </sync:syncRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://www.sernet.de/sync/sync"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:testSuite name="sync TestSuite"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="sync TestCase" searchProperties="true"><con:settings/><con:testStep type="request" name="sync"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>sync-serviceSOAP</con:interface><con:operation>sync</con:operation><con:request name="sync"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/vn-1.5.3-B0/sync/sync</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns="http://www.sernet.de/sync/data" 
xmlns:ns2="http://www.sernet.de/sync/mapping" 
xmlns:sync="http://www.sernet.de/sync/sync">
   <soapenv:Header/>
   <soapenv:Body>
      <sync:syncRequest sourceId="soapui" insert="true" update="true" delete="false">
       
<syncData>
        <syncObject>
            <syncAttribute>
                <name>org_name</name>
                <value>Webservice AG</value>
            </syncAttribute>         
            <extId>ENTITY_971739</extId>
            <extObjectType>org</extObjectType>
            <children>
                <syncAttribute>
                    <name>threat_group_name</name>
                    <value>Bedrohungen</value>
                </syncAttribute>
                <extId>ENTITY_971759</extId>
                <extObjectType>threat_group</extObjectType>
                <children>
                    <syncAttribute>
                        <name>threat_likelihood</name>
                        <value>0</value>
                    </syncAttribute>
                    <syncAttribute>
                        <name>threat_name</name>
                        <value>Fire</value>
                    </syncAttribute>
                    <extId>ENTITY_971867</extId>
                    <extObjectType>threat</extObjectType>
                </children>
            </children>
            <children>
                <syncAttribute>
                    <name>incident_scenario_group_name</name>
                    <value>Szenarios</value>
                </syncAttribute>
                <extId>ENTITY_971784</extId>
                <extObjectType>incident_scenario_group</extObjectType>
                <children>
                    <syncAttribute>
                        <name>scenario_value_method_availability</name>
                        <value>1</value>
                    </syncAttribute>
                    <syncAttribute>
                        <name>scenario_value_method_confidentiality</name>
                        <value>1</value>
                    </syncAttribute>
                    <syncAttribute>
                        <name>scenario_value_method_integrity</name>
                        <value>1</value>
                    </syncAttribute>
                    <syncAttribute>
                        <name>incident_scenario_name</name>
                        <value>Brand</value>
                    </syncAttribute>
                    <syncAttribute>
                        <name>incscen_likelihoodmethod</name>
                        <value>1</value>
                    </syncAttribute>              
                    <extId>ENTITY_971887</extId>
                    <extObjectType>incident_scenario</extObjectType>
                </children>
            </children>
        </syncObject>
        <syncLink>
            <dependant>ENTITY_971887</dependant>
            <dependency>ENTITY_971867</dependency>
            <relationId>rel_incscen_threat</relationId>
        </syncLink>
    </syncData>
    <ns2:syncMapping>
        <ns2:mapObjectType intId="threat_group" extId="threat_group">
            <ns2:mapAttributeType intId="threat_group_name" extId="threat_group_name"/>
        </ns2:mapObjectType>
        <ns2:mapObjectType intId="incident_scenario_group" extId="incident_scenario_group">
            <ns2:mapAttributeType intId="incident_scenario_group_name" extId="incident_scenario_group_name"/>
        </ns2:mapObjectType>
        <ns2:mapObjectType intId="threat" extId="threat">
            <ns2:mapAttributeType intId="threat_likelihood" extId="threat_likelihood"/>
            <ns2:mapAttributeType intId="threat_name" extId="threat_name"/>
        </ns2:mapObjectType>
        <ns2:mapObjectType intId="org" extId="org">
            <ns2:mapAttributeType intId="org_name" extId="org_name"/>
        </ns2:mapObjectType>
        <ns2:mapObjectType intId="incident_scenario" extId="incident_scenario">
            <ns2:mapAttributeType intId="scenario_value_method_availability" extId="scenario_value_method_availability"/>
            <ns2:mapAttributeType intId="scenario_value_method_confidentiality" extId="scenario_value_method_confidentiality"/>
            <ns2:mapAttributeType intId="scenario_value_method_integrity" extId="scenario_value_method_integrity"/>
            <ns2:mapAttributeType intId="incident_scenario_name" extId="incident_scenario_name"/>
            <ns2:mapAttributeType intId="incscen_likelihoodmethod" extId="incscen_likelihoodmethod"/>
        </ns2:mapObjectType>
    </ns2:syncMapping>     
        
      </sync:syncRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:username>dm</con:username><con:password>geheim</con:password></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig action="http://www.sernet.de/sync/sync" mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite name="Web TestSuite"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="true" maxResults="0" name="Sync Web TestCase" searchProperties="true"><con:settings/><con:testStep type="httprequest" name="http://localhost:8080/veriniceserver/sync/sync"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" name="http://localhost:8080/veriniceserver/sync/sync" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080/veriniceserver/sync/sync</con:endpoint><con:request/><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:mockService port="8088" path="/mocksync" host="pluto" name="sync MockService"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:mockOperation name="sync" interface="sync-serviceSOAP" operation="sync"><con:settings/><con:dispatchStyle>SEQUENCE</con:dispatchStyle><con:defaultResponse>Response 1</con:defaultResponse><con:response name="Response 1" encoding="UTF-8"><con:settings/><con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sync="http://www.sernet.de/sync/sync">
   <soapenv:Header/>
   <soapenv:Body>
      <sync:syncResponse>
         <!--1 or more repetitions:-->
         <sync:replyMessage>?</sync:replyMessage>
         <sync:inserted>?</sync:inserted>
         <sync:updated>?</sync:updated>
         <sync:deleted>?</sync:deleted>
      </sync:syncResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://www.sernet.de/sync/sync"/></con:response><con:dispatchConfig/></con:mockOperation><con:properties/></con:mockService><con:properties/><con:wssContainer/></con:soapui-project>