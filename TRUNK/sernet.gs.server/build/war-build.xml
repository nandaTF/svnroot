<?xml version="1.0" encoding="UTF-8"?>
<!-- ====================================================================== 
     15.03.2010 15:06:19                                                        

     verinice    
     ant buildfile to create a war file
                   
     author: Daniel Murygin - dm[at]sernet[dot]de                                                         
     ====================================================================== -->
<project name="verinice" default="war" basedir="../">
    <description>
            ant buildfile to create a war file
    </description>

    <!-- ================================= 
          target: war              
         ================================= -->
    <target name="war" depends="copy-jars" description="creates a war file">
		<property name="destination" location="${sp:destination}"/>
        <war destfile="${destination}/${filename}">
        	<fileset dir="WebContent"/>
        	<zipfileset dir="src" prefix="WEB-INF/classes">
        		<include name="log4j.xml"/>
        		<include name="server_hibernate.cfg.xml"/>
        		<include name="server_hibernate_derby.cfg.xml"/>
        	</zipfileset>
        </war>
    </target>

	<!-- ================================= 
          target: copy-jars              
         ================================= -->
	<target name="copy-jars" description="copies al releavant jar file to WEB-INF/lib">
		<property name="destination" location="${sp:destination}"/>
		<!-- delete old versions -->
		<delete>
			<fileset dir="${basedir}/WebContent/WEB-INF/lib/" includes="sernet.*.jar"/>
		</delete>
		<!-- copy current version to WEB-INF/lib -->
		<copy todir="${basedir}/WebContent/WEB-INF/lib" flatten="true">
			<fileset dir="${destination}/../">
			  <!-- includes -->
			  <include name="sernet.hui.common*.*/jar/sernet.hui.common*.jar"/>
			  <include name="sernet.hui.swtclient*.*/jar/sernet.hui.swtclient*.jar"/>
			  <include name="sernet.hui.server*.*/jar/sernet.hui.server*.jar"/>
			  <include name="sernet.gs.ui.rcp.main*.*/jar/sernet.gs.ui.rcp.main*.jar"/>
			  <include name="sernet.gs.server*.*/jar/sernet.gs.server*.jar"/>
			  <include name="sernet.gs.service*.*/jar/sernet.gs.service*.jar"/>
			  <include name="sernet.gs.reveng*.*/jar/sernet.gs.reveng*.jar"/>
			  <include name="sernet.verinice.samt.service*.*/jar/sernet.verinice.samt.service*.jar"/>
			  <!-- excludes -->	  
			  <exclude name="sernet.gs.ui.rcp.main.feature*.*/jar/sernet.gs.ui.rcp.main.feature*.jar"/>
			</fileset>
		</copy>
	</target>

</project>
