<?xml version="1.0" encoding="UTF-8"?>
<!-- Spring configuration for business process engine JBoss jBPM (https://www.jboss.org/jbpm) -->
<!-- See jBPM developer guide - Chapter 17. Spring Integration -->
<!-- http://docs.jboss.com/jbpm/v4/devguide/html_single/#springIntegration -->
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">
	
	<bean id="indexThread" class="sernet.verinice.search.IndexThread"
		scope="prototype">
		<property name="searchDao" ref="searchElementDao" />
	</bean>
	
	<bean id="searchIndexer" class="sernet.verinice.search.Indexer">
	<!-- <bean id="searchIndexer" class="sernet.verinice.search.Indexer" init-method="init"> -->
		<property name="elementDao" ref="cnaTreeElementDao" />
		<property name="indexThreadFactory">
			<bean
				class="org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean">
				<property name="targetBeanName">
					<idref local="indexThread" />
				</property>
			</bean>
		</property>
	</bean>


	<bean id="searchElementDao" class="sernet.verinice.search.ElementDao">
		<property name="clientFactory" ref="clientFactory" />
		<property name="configurationService" ref="configurationService" />
	</bean>

</beans>