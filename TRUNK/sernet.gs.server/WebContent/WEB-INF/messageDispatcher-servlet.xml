<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

   	<bean id="payloadMapping"
		class="org.springframework.ws.server.endpoint.mapping.PayloadRootQNameEndpointMapping">
		<property name="endpointMap">
			<map>
				<entry key="{http://www.sernet.de/sync/sync}syncRequest"
						value-ref="syncEndpoint"/>
			</map>
		</property>
		<property name="interceptors">
	        <bean class="org.springframework.ws.server.endpoint.interceptor.PayloadLoggingInterceptor"/>
	    </property>
	</bean>
	
	<bean id="syncEndpoint" class="sernet.gs.server.sync.SyncEndpoint"/>
	 
	<bean id="endpointExceptionResolver"
		class="org.springframework.ws.soap.server.endpoint.SoapFaultMappingExceptionResolver">
		<property name="exceptionMappings">
			<props>
				<prop key="sernet.gs.ui.rcp.main.sync.InternalErrorException">
					RECEIVER, Internal Server Error
				</prop>
				<prop key="sernet.gs.ui.rcp.main.sync.InvalidRequestException">
					SENDER, Invalid message received
				</prop>
			</props>
		</property>
	</bean>

<!-- 
	<bean id="sync"
		class="org.springframework.ws.wsdl.wsdl11.DynamicWsdl11Definition">
			<property name="builder">
				<bean class="org.springframework.ws.wsdl.wsdl11.builder.XsdBasedSoap11Wsdl4jDefinitionBuilder">
					 
					<property name="schema" value="sync.xsd"/>
					<property name="portTypeName" value="syncWS"/>
					<property name="locationUri" value="http://localhost:8080/veriniceserver/sync/syncService"/>
						<!- - 
								note that the transformWsdlLocations property of our MessageDispatcherServlet
								in web.xml is set to true, so this is exposed to e.g.
								http://ourserver.com:8080/veriniceserver/sync/syncService
						- ->
				</bean>
			</property>
	</bean>
	-->

	<bean id="sync"
		class="org.springframework.ws.wsdl.wsdl11.DefaultWsdl11Definition">
		<property name="schema">
			<bean class="org.springframework.xml.xsd.SimpleXsdSchema">
				<property name="xsd" value="classpath:sync.xsd" />
			</bean>
		</property>
		<property name="portTypeName" value="syncWS" />
		<property name="locationUri"
			value="http://localhost:8080/veriniceserver/sync/syncService" />
	</bean>
	    
</beans>

