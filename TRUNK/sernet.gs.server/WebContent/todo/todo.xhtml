<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:o="http://openfaces.org/"
      template="/template.xhtml">
	<ui:define name="content">
		<a4j:queue requestDelay="500" ignoreDupResponce="true"/>
	
		<div id="main">
			<!--###main### begin -->
			<div id="teaser" class="clearfix">
				<div class="block1">Sie sind hier:&nbsp;verinice Anwendung&nbsp;|&nbsp;ToDo List</div>
				<div class="langMenu">
					<h:form id="langForma">
						<img class="arrow" src="fileadmin/img/arrow.gif" width="7" height="10" alt="" />
						<h:commandLink action="#{toDo.english}" style="margin-right:0.5em"><h:graphicImage value="/image/us.png" alt="#{msg['english']}"/></h:commandLink>
						<h:commandLink action="#{toDo.german}" style="margin-right:0.5em"><h:graphicImage value="/image/de.png" alt="#{msg['german']}"/></h:commandLink>
					</h:form>
				</div>
				<div class="selectFontSize"><script type="text/javascript">if (efa_fontSize) document.write(efa_fontSize.allLinks);</script></div>
			</div>
			<div id="messages" class="clearfix">
				<div class="messages">
					<rich:messages>
						<f:facet name="errorMarker">
                        	<h:graphicImage value="/image/error.gif" style="margin-right:0.5em"/>   
                    	</f:facet>
					</rich:messages>
				</div>
			</div>
		
			<!-- #col1: Erste Float-Spalte des Inhaltsbereiches -->
			<div id="col1">
				<!--###col1### begin -->
				<div id="col1_content" class="clearfix"><h1><h:outputText value="#{msg['todo.group']}" /></h1>
					<div class="mainMenu">
						<h:form id="verbundForm">
							<ul>
								<o:forEach id="itVerbundList" items="#{assetNavigation.itVerbundList}" var="itVerbund">
						  			<li>
								  		<a4j:commandLink 
								  			value="#{itVerbund.titel}" 
								  			action="#{toDo.loadToDoListForVerbund}" 
								  			reRender="tablePanel,elementPanel,itVerbundList,editPanel" 
								  			styleClass="#{itVerbund.dbId==assetNavigation.selectedItVerbund.dbId ? 'selected' : 'normal'}">
								            <a4j:actionparam name="itVerbundTitel" value="#{itVerbund.titel}" assignTo="#{assetNavigation.selectedItVerbundTitel}"/>
								        </a4j:commandLink>
								    </li>
								</o:forEach>
							</ul>
							<h1><h:outputText value="#{msg['todo.realization']}" /></h1>
							<ul>
								<!-- Grundschutz -->
								
					  			<li>
							  		<h:selectBooleanCheckbox id="executionNo" value="#{toDo.executionNo}">	  			
							  			<a4j:support action="#{toDo.loadToDoList}" event="onchange" reRender="tablePanel,editPanel"/>
							  		</h:selectBooleanCheckbox>
							  		<h:outputLabel for="executionNo" value="#{msg['todo.no']}"/>
							  	</li>
							  	<li>
							  		<h:selectBooleanCheckbox id="executionYes" value="#{toDo.executionYes}">	  			
							  			<a4j:support action="#{toDo.loadToDoList}" event="onchange" reRender="tablePanel,editPanel"/>
							  		</h:selectBooleanCheckbox>
							  		<h:outputLabel for="executionYes" value="#{msg['todo.yes']}"/>
							  	</li>
							  	<li>
							  		<h:selectBooleanCheckbox id="executionPartly" value="#{toDo.executionPartly}">	  			
							  			<a4j:support action="#{toDo.loadToDoList}" event="onchange" reRender="tablePanel,editPanel"/>
							  		</h:selectBooleanCheckbox>
							  		<h:outputLabel for="executionPartly" value="#{msg['todo.partly']}"/>
							  	</li>
							  	<li>
							  		<h:selectBooleanCheckbox id="executionDispensable" value="#{toDo.executionDispensable}">	  			
							  			<a4j:support action="#{toDo.loadToDoList}" event="onchange" reRender="tablePanel,editPanel"/>
							  		</h:selectBooleanCheckbox>
								    <h:outputLabel for="executionDispensable" value="#{msg['todo.superfluous']}"/>
							  	</li>
							  	<li>
							  		<h:selectBooleanCheckbox id="executionUntreated" value="#{toDo.executionUntreated}">	  			
							  			<a4j:support action="#{toDo.loadToDoList}" event="onchange" reRender="tablePanel,editPanel"/>
							  		</h:selectBooleanCheckbox>
							  		<h:outputLabel for="executionUntreated" value="#{msg['todo.untreated']}"/>					    
							    </li>							    					    
							    <!-- ISO 27001 -->	
							    <!--					
					  			<li>
							  		<o:selectBooleanCheckbox id="executionPerformed" value="#{toDo.executionPerformed}" />
							  		<h:outputLabel for="executionPerformed" value="Performed"/>
							  	</li>
					  			<li>
							  		<o:selectBooleanCheckbox id="executionManaged" value="#{toDo.executionManaged}" />
							  		<h:outputLabel for="executionManaged" value="Managed"/>
							  	</li>
					  			<li>
							  		<o:selectBooleanCheckbox id="executionEstablished" value="#{toDo.executionEstablished}" />
							  		<h:outputLabel for="executionEstablished" value="Established"/>
							  	</li>
					  			<li>
							  		<o:selectBooleanCheckbox id="executionPredictable" value="#{toDo.executionPredictable}" />
							  		<h:outputLabel for="executionPredictable" value="Predictable"/>
							  	</li>
					  			<li>
							  		<o:selectBooleanCheckbox id="executionOptimizing" value="#{toDo.executionOptimizing}" />
							  		<h:outputLabel for="executionOptimizing" value="Optimizing"/>
							  	</li>
							  	-->
							</ul>
							<h1><h:outputText value="#{msg['todo.seal']}" /></h1>
							<ul>
					  			<li>
							  		<h:selectBooleanCheckbox id="sealA" value="#{toDo.sealA}">	  			
							  			<a4j:support action="#{toDo.loadToDoList}" event="onchange" reRender="tablePanel,editPanel"/>
							  		</h:selectBooleanCheckbox>
							  		<h:outputLabel for="sealA" value="A"/>
							  	</li>
							  	<li>
							  		<h:selectBooleanCheckbox id="sealB" value="#{toDo.sealB}">	  			
							  			<a4j:support action="#{toDo.loadToDoList}" event="onchange" reRender="tablePanel,editPanel"/>
							  		</h:selectBooleanCheckbox>
							  		<h:outputLabel for="sealB" value="B"/>
							  	</li>
							  	<li>
							  		<h:selectBooleanCheckbox id="sealC" value="#{toDo.sealC}">	  			
							  			<a4j:support action="#{toDo.loadToDoList}" event="onchange" reRender="tablePanel,editPanel"/>
							  		</h:selectBooleanCheckbox>
							  		<h:outputLabel for="sealC" value="C"/>
							  	</li>
							  	<li>
							  		<h:selectBooleanCheckbox id="sealZ" value="#{toDo.sealZ}">	  			
							  			<a4j:support action="#{toDo.loadToDoList}" event="onchange" reRender="tablePanel,editPanel"/>
							  		</h:selectBooleanCheckbox>
							  		<h:outputLabel for="sealZ" value="Z"/>
							  	</li>
							</ul>
						</h:form>
					</div>
				</div>
			 	<!--###col1### end -->
			</div>
			<!-- #col1: - Ende -->
			
			<!-- #col2: Zweite Float-Spalte des Inhaltsbereiches -->
			<div id="col2">
				<!--###col1### begin -->
				<div id="col2_content" class="clearfix">
					<div id="col3_innen" class="floatbox">
				    	<a id="c86"></a>
					    <div class="csc-textpic-text">
				      			<a4j:outputPanel id="editPanel">
				      				<a4j:outputPanel id="editHeader" rendered="#{toDo.massnahmeUmsetzung!=null}" styleClass="csc-header csc-header-n1">
					      				<h1 class="csc-firstHeader"><h:outputText value="#{msg['todo.measure']} #{toDo.massnahmeUmsetzung.titel}"/></h1>
					      			</a4j:outputPanel>
				      				<a4j:form id="editForm" rendered="#{toDo.massnahmeUmsetzung!=null}">	
										<table>
											<tr>
												<td>
													<h:outputLabel for="umsetzung" value="#{msg['todo.realization']}" styleClass="formLabel"/>
												</td>
												<td>
													<o:dropDownField value="#{toDo.umsetzung}" converter="#{toDo.umsetzungConverter}" style="margin-left:1em;margin-right:1em;width:161px;">
							  							<o:dropDownItems value="#{toDo.executionList}"/>
							  						</o:dropDownField>
												</td>
												<td>
													<h:outputLabel for="erlaeuterung" value="#{msg['todo.comment']}" styleClass="formLabel"/>					  					
												</td>
												<td rowspan="2">
													<h:inputTextarea value="#{toDo.massnahmeUmsetzung.erlaeuterung}" style="width:298px;height:50px;"/>
												</td>
											</tr>
											<tr>
												<td>
													<h:outputLabel for="umsetzungBis" value="#{msg['todo.until']}" styleClass="formLabel"/>
												</td>
												<td>
													<rich:calendar id="umsetzungBis" value="#{toDo.massnahmeUmsetzung.umsetzungBis}" timeZone="#{toDo.timeZone}" datePattern="d. MMM. yyyy"  style="width: 130px"/>										
												</td>
											</tr>
											<tr>
												<td>
													
												</td>
												<td>
													<a4j:commandButton id="submit" value="#{msg['todo.save']}" action="#{toDo.save}" reRender="editPanel,tablePanel" style="margin-top:1em"/>												
												</td>
												<td colspan="2">
													<rich:message for="submit">
														<f:facet name="errorMarker">
								                        	<h:graphicImage value="/image/error.gif" />   
								                    	</f:facet>
								                    </rich:message>
												</td>
											</tr>
										</table>
									</a4j:form>
								</a4j:outputPanel>						
								<a4j:outputPanel id="tablePanel">
									<div class="csc-header csc-header-n1">
					      				<h1 class="csc-firstHeader"><h:outputText value="#{msg['todo.measures']} - #{assetNavigation.selectedItVerbundTitel}"/></h1>
					      			</div>
					      			<h:form id="tableForm">
					      				 <rich:extendedDataTable
					      				 	id="toDoTable"
							                value="#{toDo.todoList}" 
							                var="item"
							                binding="#{toDo.table}"
							                width="650"
							                selectionMode="single"
							                selection="#{toDo.selection}">
							                <rich:column id="colUmsetzung"
					      						sortable="true" 
					      						sortBy="#{item.umsetzung}"
							                    width="35px"
							                    label="Umsetzung">
							                     <h:graphicImage url="/image/icon/#{item.umsetzungIcon}" />
							                </rich:column>
							                <rich:column id="colUmsetzungBis"
					      						sortable="true" 
					      						sortBy="#{item.umsetzungBis}"
							                    width="55px"
							                    label="bis">
							                    <f:facet name="header">
							                        <h:outputText value="#{msg['todo.until']}" />
							                    </f:facet>
							                    <h:outputText value="#{item.umsetzungBis}">
											    	<f:convertDateTime dateStyle="short" type="date" timeZone="#{toDo.timeZone}" />
											    </h:outputText>
							                </rich:column>
							                <rich:column id="colUmsetzungDurch"
					      						sortable="true" 
					      						sortBy="#{item.umsetzungDurch}"
							                    width="95px"
							                    label="Verantwortlich">
							                    <f:facet name="header">
							                        <h:outputText value="#{msg['todo.responsible']}" />
							                    </f:facet>
							                    <h:outputText value="#{item.umsetzungDurch}"/>
							                </rich:column>
							                <rich:column id="colStufe"
					      						sortable="true" 
					      						sortBy="#{item.stufe}"
							                    width="45px"
							                    label="Stufe">
							                    <f:facet name="header">
							                        <h:outputText value="#{msg['todo.level']}" />
							                    </f:facet>
							                    <h:outputText value="#{item.stufe}"/>
							                </rich:column>
							                <rich:column id="colParentTitle"
					      						sortable="true" 
					      						sortBy="#{item.parentTitle}"
							                    width="160px"
							                    label="Zielobjekt">
							                    <f:facet name="header">
							                        <h:outputText value="#{msg['todo.asset']}" />
							                    </f:facet>
							                    <h:outputText value="#{item.parentTitle}"/>
							                </rich:column>
							                <rich:column id="colTitel"
					      						sortable="true" 
					      						sortBy="#{item.titel}"
							                    width="260px"
							                    label="Titel">
							                    <f:facet name="header">
							                        <h:outputText value="#{msg['todo.title']}" />
							                    </f:facet>
							                    <h:outputText value="#{item.titel}"/>
							                </rich:column>
					      					 <a4j:support reRender="editPanel"
							                    action="#{toDo.loadToDo}"
							                    event="onselectionchange" />
							            </rich:extendedDataTable>								
									</h:form>
								</a4j:outputPanel>
				      		</div>
				    	</div>			    
				    </div>
				</div>
			 	<!--###col2### end -->
			</div>
			<!-- #col2: - Ende -->
			
			<a id="content" name="content"></a> <!-- Skiplink-Anker: Content -->
			<!-- #col3: Statische Spalte des Inhaltsbereiches -->
			<div id="col3">
				<!--###col3### begin -->
		      	<div id="col3_content" class="clearfix">
		      		<!--###col3_content### begin -->
		      		<div id="col3_innen" class="floatbox">
		      			<div class="csc-header csc-header-n1">
		      				<h1 class="csc-firstHeader"><h:outputText value="#{msg['todo.assets']}" /></h1>
		      			</div>
		      			<h:form id="elementsForm">
			      			<rich:panelBar id="elementPanel" height="500" width="161">
			      				<rich:panelBarItem label="#{msg['todo.buildings']}" rendered="#{not empty assetNavigation.gebaeudeList}">
						        	<ul>
								 		<a4j:repeat id="gebaeudeList" value="#{assetNavigation.gebaeudeList}" var="item">
								 			<li>
										  		<a4j:commandLink 
										  			value="#{item.titel}" 
										  			action="#{toDo.loadToDoListForElement}" 
										  			reRender="tablePanel,editPanel,elementPanel" 
										  			styleClass="#{item.dbId==assetNavigation.selectedElementId ? 'selected' : 'normal'}" >
										            <a4j:actionparam name="itemId" value="#{item.dbId}" assignTo="#{assetNavigation.selectedElementId}"/>
										        </a4j:commandLink>
										    </li>
									    </a4j:repeat>
									</ul>
						        </rich:panelBarItem>
						        <rich:panelBarItem label="#{msg['todo.rooms']}" rendered="#{not empty assetNavigation.raumList}">
						        	<ul>
								  		<a4j:repeat id="raumList" value="#{assetNavigation.raumList}" var="item">
								  			<li>
										  		<a4j:commandLink value="#{item.titel}" 
										  			action="#{toDo.loadToDoListForElement}" 
										  			reRender="tablePanel,editPanel,elementPanel" 
										  			styleClass="#{item.dbId==assetNavigation.selectedElementId ? 'selected' : 'normal'}">
										            <a4j:actionparam name="itemId" value="#{item.dbId}" assignTo="#{assetNavigation.selectedElementId}"/>
										        </a4j:commandLink>
										    </li>
									    </a4j:repeat>
									</ul>
						        </rich:panelBarItem>				     					
						        <rich:panelBarItem  label="#{msg['todo.clients']}" rendered="#{not empty assetNavigation.clienteList}">			      						
		      						<ul>
								  		<a4j:repeat id="clienteList" value="#{assetNavigation.clienteList}" var="item">
								  			<li>
										  		<a4j:commandLink value="#{item.titel}" 
										  			action="#{toDo.loadToDoListForElement}"									  			 
										  			reRender="tablePanel,editPanel,elementPanel" 
										  			styleClass="#{item.dbId==assetNavigation.selectedElementId ? 'selected' : 'normal'}">
										            <a4j:actionparam name="itemId" value="#{item.dbId}" assignTo="#{assetNavigation.selectedElementId}"/>
										        </a4j:commandLink>
										    </li>
									    </a4j:repeat>
									</ul>			        	
						        </rich:panelBarItem>				     					
						        <rich:panelBarItem label="#{msg['todo.server']}" rendered="#{not empty assetNavigation.serverList}">
		      						<ul>
								  		<a4j:repeat id="serverList" value="#{assetNavigation.serverList}" var="item">
								  			<li>
										  		<a4j:commandLink value="#{item.titel}" 
										  			action="#{toDo.loadToDoListForElement}"
										  			reRender="tablePanel,editPanel,elementPanel" 
										  			styleClass="#{item.dbId==assetNavigation.selectedElementId ? 'selected' : 'normal'}">
										            <a4j:actionparam name="itemId" value="#{item.dbId}" assignTo="#{assetNavigation.selectedElementId}"/>
										        </a4j:commandLink>
										    </li>
									    </a4j:repeat>
									</ul>
						        </rich:panelBarItem>				     					
						        <rich:panelBarItem label="#{msg['todo.networks']}" rendered="#{not empty assetNavigation.netzList}">
		      						<ul>
								  		<a4j:repeat id="netzList" value="#{assetNavigation.netzList}" var="item">
								  			<li>
										  		<a4j:commandLink value="#{item.titel}" 
										  			action="#{toDo.loadToDoListForElement}" 
										  			reRender="tablePanel,editPanel,elementPanel" 
										  			styleClass="#{item.dbId==assetNavigation.selectedElementId ? 'selected' : 'normal'}">
										            <a4j:actionparam name="itemId" value="#{item.dbId}" assignTo="#{assetNavigation.selectedElementId}"/>
										        </a4j:commandLink>
										    </li>
									    </a4j:repeat>
									</ul>
						        </rich:panelBarItem>				     					
						        <rich:panelBarItem label="#{msg['todo.applications']}" rendered="#{not empty assetNavigation.anwendungList}">
		      						<ul>
								  		<a4j:repeat id="anwendungList" value="#{assetNavigation.anwendungList}" var="item">
								  			<li>
										  		<a4j:commandLink value="#{item.titel}" 
										  			action="#{toDo.loadToDoListForElement}" 
										  			reRender="tablePanel,editPanel,elementPanel" 
										  			styleClass="#{item.dbId==assetNavigation.selectedElementId ? 'selected' : 'normal'}">
										            <a4j:actionparam name="itemId" value="#{item.dbId}" assignTo="#{assetNavigation.selectedElementId}"/>
										        </a4j:commandLink>
										    </li>
									    </a4j:repeat>
									</ul>
						        </rich:panelBarItem>				     					
						        <rich:panelBarItem label="#{msg['todo.employees']}" rendered="#{not empty assetNavigation.personList}">
		      						<ul>
								  		<a4j:repeat id="personList" value="#{assetNavigation.personList}" var="item">
								  			<li>
										  		<a4j:commandLink value="#{item.titel}" 
										  			action="#{toDo.loadToDoListForElement}" 
										  			reRender="tablePanel,editPanel,elementPanel" 
										  			styleClass="#{item.dbId==assetNavigation.selectedElementId ? 'selected' : 'normal'}">
										            <a4j:actionparam name="itemId" value="#{item.dbId}" assignTo="#{assetNavigation.selectedElementId}"/>
										        </a4j:commandLink>
										    </li>
									    </a4j:repeat>
									</ul>
						        </rich:panelBarItem>				  
						    </rich:panelBar>
						</h:form>		
					<!--###col3_content### end -->
					</div>
				<!-- IE Column Clearing -->
				<div id="ie_clearing"><!--###ie_clearing### begin -->&nbsp;<!--###ie_clearing### end --></div>
				<!-- Ende: IE Column Clearing -->
		    	<!--###col3### end -->
		    </div>
			<!-- #col3: - Ende -->
			<!--###main### end -->
		</div>
	</ui:define>
</ui:composition>