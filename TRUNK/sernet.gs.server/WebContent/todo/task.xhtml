<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:o="http://openfaces.org/"
      template="/template.xhtml">
	<ui:define name="content">
		<a4j:queue requestDelay="500" ignoreDupResponce="true"/>
		<div id="main">
			<!--###main### begin -->
			<div id="teaser" class="clearfix">
				<div class="langMenu">
					<h:form id="langForma">
						<h:commandLink action="#{task.english}" style="margin-right:0.5em"><h:graphicImage value="/image/us.png" alt="#{msg['english']}"/></h:commandLink>
						<h:commandLink action="#{task.german}" style="margin-right:0.5em"><h:graphicImage value="/image/de.png" alt="#{msg['german']}"/></h:commandLink>
					</h:form>
				</div>
			</div>
			<div id="messages" class="clearfix">
				<div class="messages">
					<rich:messages>
						<f:facet name="errorMarker">
                        	<h:graphicImage value="/image/error.gif" style="margin-right:0.5em"/>   
                    	</f:facet>
					</rich:messages>
				</div>
			</div>
		
			<!-- #col1: Erste Float-Spalte des Inhaltsbereiches -->
			<div id="col1">
				<!--###col1### begin -->
				<div id="col1_content" class="clearfix">
					<h1><h:outputText value="#{msgTask['tasks']}" /></h1>
					<a4j:outputPanel id="tablePanel">					
		      			<h:form id="tableForm">
		      				 <rich:extendedDataTable
		      				 	id="taskTable"
				                value="#{task.taskList}" 
				                var="item"
				                binding="#{task.table}"
				                selectionMode="single"
				                selection="#{task.selection}">						                
				                <rich:column id="colTitle"
		      						sortable="true" 
		      						sortBy="#{item.name}"
				                    width="140"
				                    label="#{msgTask['title']}">
				                    <f:facet name="header">
				                        <h:outputText value="#{msgTask['title']}" />
				                    </f:facet>
				                    <h:outputText value="#{item.name}"/>
				                </rich:column>
				                <rich:column id="colElement"
		      						sortable="true" 
		      						sortBy="#{item.controlTitle}"
				                    label="#{msgTask['control']}">
				                    <f:facet name="header">
				                        <h:outputText value="#{msgTask['control']}" />
				                    </f:facet>
				                    <h:outputText value="#{item.controlTitle}"/>
				                </rich:column>			                
				                <rich:column id="colDate"
		      						sortable="true" 
		      						sortBy="#{item.createDate}"
				                    label="bis">
				                    <f:facet name="header">
				                        <h:outputText value="#{msgTask['createDate']}" />
				                    </f:facet>
				                    <h:outputText value="#{item.createDate}">
								    	<f:convertDateTime dateStyle="short" type="date" timeZone="#{task.timeZone}" />
								    </h:outputText>
				                </rich:column>
				                <a4j:support reRender="editPanel"
					                    action="#{task.openTask}"
					                    event="onselectionchange" />					 
				            </rich:extendedDataTable>								
						</h:form>
					</a4j:outputPanel>
				</div>
			 	<!--###col1### end -->
			</div>
			<!-- #col1: - Ende -->
			
			<!-- #col2: Zweite Float-Spalte des Inhaltsbereiches -->
			<div id="col2">
				<!--###col1### begin -->
				<div id="col2_content" class="clearfix">
					<div id="col3_innen" class="floatbox">
				    	<a id="c86"></a>
					    <div class="csc-textpic-text">
					    	<a4j:outputPanel id="editPanel">
						    	<a4j:form id="editForm" rendered="#{edit.element!=null}">
						    		<div class="csc-header csc-header-n1">
					      				<h1><h:outputText value="#{edit.title}"/></h1>					      							      			
			      						<a4j:commandButton id="submit" value="#{msgEdit['save']}" action="#{edit.save}" style="margin-bottom: 5px;"/>					
										<rich:message for="submit">
											<f:facet name="errorMarker">
					                        	<h:graphicImage value="/image/error.gif" style="margin-left:0.5em;margin-right:0.5em;"/>   
					                    	</f:facet>
					                    </rich:message>
							        </div>
				      				<rich:simpleTogglePanel  switchType="client" label="#{msgEdit['general']}" opened="#{edit.generalOpen}">
					      				<table style="width: 640px;">						
							      			<a4j:repeat id="propertyList" value="#{edit.propertyList}" var="property">
							      				<tr>
													<td style="width: 250px;"><h:outputText value="#{property.name}"/></td>
													<td>
														<h:inputText value="#{property.value}" rendered="#{property.isLine}"/>
														<h:inputTextarea value="#{property.value}" rendered="#{property.isText}" style="height:50px;"/>
														<rich:calendar value="#{property.date}" datePattern="#{property.datePattern}" rendered="#{property.isDate}"/>
														<rich:comboBox value="#{property.selectedOption}" suggestionValues="#{property.optionList}" enableManualInput="false" rendered="#{property.isSingleSelect}" style="margin-bottom:5px"/>							
														<rich:comboBox value="#{property.selectedOption}" suggestionValues="#{property.optionList}" enableManualInput="false" rendered="#{property.isNumericSelect and not empty property.optionList}" style="margin-bottom:5px"/>
														<rich:inputNumberSpinner value="#{property.value}" minValue="#{property.min}" maxValue="#{property.max}" rendered="#{property.isNumericSelect and empty property.optionList}"/>
													</td>
													<!-- for debug only -->
													<!--
													<td><h:outputText value="#{property.inputName}"/></td>
													<td><h:outputText value="#{property.value}"/></td>
													-->
												</tr>			      				
							      			</a4j:repeat>
							      		</table>
							      	</rich:simpleTogglePanel>
						      		<a4j:repeat id="groupList" value="#{edit.groupList}" var="group">
							      		<rich:simpleTogglePanel  switchType="client" label="#{group.name}" opened="#{edit.groupOpen}">
						      				<table style="width: 640px;">
						      					<a4j:repeat value="#{group.propertyList}" var="propertyG">
						      						<tr>
														<td style="width: 250px;"><h:outputText value="#{propertyG.name}"/></td>
														<td>
															<h:inputText value="#{propertyG.value}" rendered="#{propertyG.isLine}"/>
															<h:inputTextarea value="#{propertyG.value}" rendered="#{propertyG.isText}" style="height:50px;"/>
															<rich:calendar value="#{propertyG.date}" datePattern="#{propertyG.datePattern}" rendered="#{propertyG.isDate}"/>
															<rich:comboBox value="#{propertyG.selectedOption}" suggestionValues="#{propertyG.optionList}" enableManualInput="false" rendered="#{propertyG.isSingleSelect}" style="margin-bottom:5px"/>							
															<rich:comboBox value="#{propertyG.selectedOption}" suggestionValues="#{propertyG.optionList}" enableManualInput="false" rendered="#{propertyG.isNumericSelect and not empty propertyG.optionList}" style="margin-bottom:5px"/>
															<rich:inputNumberSpinner value="#{propertyG.value}" minValue="#{propertyG.min}" maxValue="#{propertyG.max}" rendered="#{propertyG.isNumericSelect and empty propertyG.optionList}"/>
														</td>
														<!-- for debug only -->
														<!--
														<td><h:outputText value="#{property.inputName}"/></td>
														<td><h:outputText value="#{property.value}"/></td>
														-->
													</tr>	
												</a4j:repeat>
						      				</table>
							      		</rich:simpleTogglePanel>
						      		</a4j:repeat>
					      		</a4j:form>
					    	</a4j:outputPanel>							
				      	</div>
					</div>			    
				</div>
			</div>
			<!--###col2### end -->
			
		</div>
		<!-- #main - Ende -->
	</ui:define>
</ui:composition>